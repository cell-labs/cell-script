
import (
	"debug"
	"tx"
	"ckb"
)

const (
	ERROR_SCRIPT_ERROR = 0

)

func main() {
	script := ckb.loadScript()
	if !ckb.verifyScript(script) {
		return ERROR_SCRIPT_ERROR
	}
	rawArgs := script.Args().AsSlice()
	lockInScriptArgs := make(string, rawArgs)

	// check owner mode
	ownerMode := false
	numInputCells := ckb.inputCells()
	// at least one input
	if numInputCells == 0 {
		return 1
	}
	for i := 0; i < numInputCells; i++ {
		cell := ckb.inputCell(i)
		lock := cell.Lock()
		codeHash := cell.Lock().CodeHash()
		lock := make(string, codeHash.AsSlice())
		if lock == lockInScriptArgs {
 			ownerMode = true
			break
		}
	}

	if ownerMode {
		return 0
	}

	// in_sum, out_sum := 0, 0
	// for output := range tx.outputs() {
	// 	out_sum += output
	// }

	// if in_sum < out_sum {
	// 	debug.Printf("Invalid Amount")
	// 	return 1
	// }

	return 0
}